<html>

<head>
</head>

<body>
    <canvas id="canvas" width="1080" height="720">
    </canvas>
</body>

<script>
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    var image = new Image();
    image.onload = function() {
        ctx.drawImage(image, 0, 0);
    };

    document.addEventListener("DOMContentLoaded", function(event) {
        var socket = new WebSocket("ws://" + window.location.host + "/ws/view");
        socket.onmessage = function(data) {
            /*try {
                var info = JSON.parse(data.data);
                image.src = "data:image/png;base64," + info.data;
                console.log("data:image/png;base64," + info.data);
            } catch(err) {
                console.log("JSON Parse failed");
            }*/
            image.src = "data:image/jpeg;base64," + data.data;
        }
    });
</script>

</html>
